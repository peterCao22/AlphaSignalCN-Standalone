# BigQuant 技术分析因子 - 实际字段说明

## 重大发现！

**BigQuant `cn_stock_factors_ta` 表实际有 113 个字段！** 

之前以为只有 50个字段且缺少 RSI、布林带等，实际上**所有常用技术指标都有**！

## 字段分类统计

| 类别 | 数量 | 具体字段 |
|------|------|---------|
| **基础字段** | 2 | date, instrument |
| **SMA 简单移动平均线** | 6 | sma_5, sma_10, sma_20, sma_60, sma_120, sma_250 |
| **EMA 指数移动平均线** | 6 | ema_5, ema_10, ema_20, ema_60, ema_120, ema_250 |
| **WMA 加权移动平均线** | 6 | wma_5, wma_10, wma_20, wma_60, wma_120, wma_250 |
| **MACD 指标** | 12 | 4组参数 (5-20-5, 8-34-7, 12-26-9, 10-50-10) × 3个值 (diff, dea, hist) |
| **KDJ 指标** | 20 | 5组参数 × 4个值 (rsv, k, d, j) |
| **BIAS 乖离率** | 6 | bias_5, bias_10, bias_20, bias_60, bias_120, bias_250 |
| **RSI 相对强弱指标** ✅ | 6 | rsi_6, rsi_12, rsi_24, rsi_48, rsi_60, rsi_120 |
| **布林带 BBANDS** ✅ | 27 | 3组参数 (5日/10日/20日) × 3个位置 (上/中/下) × 3个标准差倍数 |
| **CCI 指标** ✅ | 6 | cci_5, cci_14, cci_20, cci_30, cci_60, cci_120 |
| **威廉指标 WILLR** | 0 | ❌ 确实没有 |
| **ATR 真实波动幅度** | 5 | atr_6, atr_14, atr_20, atr_30, atr_60 |
| **OBV 能量潮** | 6 | obv, maobv_6, maobv_14, maobv_20, maobv_30, maobv_60 |
| **TRIX 三重指数平滑** | 5 | trix_5_3, trix_7_4, trix_12_9, trix_20_12, trix_60_20 |
| **总计** | **113** | |

## 我们选择的字段（62个技术指标）

基于价值和常用性，下载脚本选择了以下字段：

### 移动平均线系列（18个）
- **SMA**: sma_5, sma_10, sma_20, sma_60, sma_120, sma_250
- **EMA**: ema_5, ema_10, ema_20, ema_60, ema_120, ema_250
- **WMA**: wma_5, wma_10, wma_20, wma_60, wma_120, wma_250

### 趋势和动量指标（18个）
- **MACD标准**: macd_diff_12_26_9, macd_dea_12_26_9, macd_hist_12_26_9
- **MACD快速**: macd_diff_5_20_5, macd_dea_5_20_5, macd_hist_5_20_5
- **BIAS**: bias_5, bias_10, bias_20, bias_60, bias_120, bias_250

### 超买超卖指标（12个）
- **KDJ标准**: kdj_k_9_3_3, kdj_d_9_3_3, kdj_j_9_3_3
- **KDJ快速**: kdj_k_5_3_3, kdj_d_5_3_3, kdj_j_5_3_3
- **RSI**: rsi_6, rsi_12, rsi_24, rsi_48, rsi_60, rsi_120

### 波动率和支撑压力（9个）
- **布林带20日**: bbands_upper_20_2, bbands_middle_20_2, bbands_lower_20_2
- **布林带10日**: bbands_upper_10_2, bbands_middle_10_2, bbands_lower_10_2
- **ATR**: atr_14, atr_20, atr_60

### 其他指标（5个）
- **CCI**: cci_14, cci_20, cci_60
- **OBV**: obv, maobv_20
- **TRIX**: trix_12_9, trix_20_12

## 模型特征总数：83个

结合其他数据源，最终模型使用：

| 数据源 | 特征数 |
|--------|--------|
| 基础特征（连板、量比等） | 4 |
| BigQuant 技术指标 | 61 |
| 筹码分布 | 3 |
| 龙虎榜 | 1 |
| 市场情绪 | 3 |
| 增强特征（热度、概念、竞价） | 11 |
| **总计** | **83** |

## 与之前版本对比

| 版本 | 特征数 | 技术指标覆盖 | 状态 |
|------|--------|-------------|------|
| 初版（保守） | 26 | 🔴 只用了5个技术指标 | 废弃 |
| 扩展版 | 43 | 🟡 以为没RSI/布林带 | 废弃 |
| **完整版** ✅ | **83** | 🟢 **充分利用113个字段** | **当前** |

## 查看所有字段的命令

```bash
conda activate rqsdk
cd d:\myCursor\StockAiNews\TradingAgents-chinese-market\AlphaSignal-CN
python scripts\download_ta_factors.py --list-fields
```

## 下载数据的命令

```bash
# 下载技术分析因子（现在会下载62个技术指标字段）
python scripts\download_ta_factors.py
```

## 预期效果

### 1. 信息丰富度
- **之前**: 只有基础MA和单周期RSI
- **现在**: 
  - 多类型均线（SMA/EMA/WMA）
  - 多周期RSI（6/12/24/48/60/120日）
  - 多参数MACD（标准+快速）
  - 多周期KDJ（标准+快速）
  - 完整的布林带（10日+20日）
  - CCI、ATR、OBV、TRIX 等高级指标

### 2. 模型能力
- **多维度分析**: 趋势 + 动量 + 波动率 + 成交量
- **多周期共振**: 短期(6日) + 中期(20日) + 长期(120日)
- **指标互补**: 价格类 + 成交量类 + 波动率类

### 3. 预期准确率提升
- **保守估计**: AUC +5-10%
- **乐观估计**: AUC +10-15%
- **原因**: 信息量从 26维 → 83维，增加了 **220%**！

## 重要说明

1. ✅ **RSI 存在**: 有6个周期的RSI，之前误以为没有
2. ✅ **布林带存在**: 有27个布林带字段（9组参数组合）
3. ✅ **CCI 存在**: 有6个周期的CCI
4. ❌ **威廉指标不存在**: 确实没有WILLR相关字段
5. ✅ **额外惊喜**: 还有ATR、OBV、TRIX等高级指标

## 下一步行动

1. **运行下载脚本**:
   ```bash
   python scripts\download_ta_factors.py
   ```

2. **训练新模型**:
   ```bash
   python scripts\train_model.py
   ```

3. **对比效果**:
   - 备份旧模型（26个特征）
   - 训练新模型（83个特征）
   - 对比AUC分数和实际预测准确率

4. **特征重要性分析**:
   - 查看哪些新增指标对模型贡献最大
   - 可能发现一些"黑马"指标（如TRIX、ATR）

## 总结

这是一个**重大升级**！从原以为只有50个字段且缺少关键指标，到发现实际有113个字段且包含所有需要的指标。

模型特征从 26个 → 83个，**信息量增加了220%**，预期会带来显著的准确率提升！

🎉🎉🎉
